---
pagetitle: "Comunicar con Quarto"
subtitle: "Unidad 8"
format: 
  revealjs:
    auto-stretch: false    
    self-contained: true
    width: 1600
    height: 900
    slide-number: true
    transition: fade
    theme: [simple, custom.scss]
    logo: INE.gif
    footer: "Instituto Nacional de Epidemiolog√≠a"
---

```{r setup, include=F}
#| label: setup
#| include: false


library(quarto)
library(fontawesome)
library(tidyverse)
```

##  {#hola-quarto-title data-menu-title="Bienvenidxs a Quarto" background-image="images/bienvenidxs2.png" aria-label="Un cometa de Quarto" visibility="uncounted"}

[***Unidad 8***]{.custom-subtitle}

[basado en tom mock, mine centikaya<br>y elaboraci√≥n propia. artwork por allison horst]{.custom-artwork}


## Qu√© es Quarto¬Æ? {.title-top}

<br>

> **Quarto¬Æ es un nuevo sistema de publicaci√≥n cient√≠fica y t√©cnica de c√≥digo abierto construido sobre [Pandoc](https://pandoc.org/)** [^1]

[^1]: conversor de documentos libre y de c√≥digo abierto, mayormente usado como una herramienta de escritura (especialmente por acad√©micos) ver en [Wikipedia](https://es.wikipedia.org/wiki/Pandoc)

. . .

> Mezcla texto narrativo y c√≥digo para producir resultados con un formato elegante en documentos, tableros interactivos, p√°ginas web, publicaciones de blogs, libros y m√°s.

. . .

> Es independiente del lenguaje R (incluso trabaja con otros lenguajes como Python y Julia).

## Comunicar como parte de programar {.title-top}

<br>

![](images/Captura1.PNG){fig-align="center" width=90%}

## Ecosistema de RMarkdown {.title-top .nostretch}

<br>


::: {.fragment .fade-up}
![](images/Captura5.PNG){fig-align="center" fig-width=100%}
:::


## RMarkdown en Rstudio {.title-top}

-   Desarrollo del paquete **knitr** desde 2011
-   Desarrollo de **RMarkdown** desde 2014 (rmarkdown + pandoc)
- 10 a√±os de experiencia en `knitr` + `rmarkdown` se volcaron al desarrollo de Quarto.

![](images/Captura2.PNG){.absolute top="370" left="250" width="1100"}

## Como funciona Quarto? {.title-top .centrado}

![](images/Captura6.PNG){.absolute top="200" left="150" width="1600"}

## Como funciona Quarto? {.title-top .centrado}

<br>

::: {.fragment .fade-in-then-semi-out}

Quarto usa `knitr` o `jupyter` como motor para ejecutar c√≥digo y generar una salida temporal (**.md**).

:::

::: {.fragment .fade-in-then-semi-out}

El archivo temporal se procesa mediante los filtros **Lua** de `Pandoc` y `Quarto` + `Bootstrap CSS` para **HTML** o `LaTeX` para **PDF** y se convierte a un formato de salida final.
:::

::: {.fragment .fade-in-then-semi-out}

Los filtros Lua escritos por desarrolladores de `R`/`Python`/`Julia` son intercambiables entre formatos.

:::

::: {.fragment .fade-in-then-semi-out}

Quarto adem√°s incluye soporte nativo para `Observable JS`, un conjunto de mejoras a JavaScript b√°sico creado por *Mike Bostock* (tambi√©n autor de `D3`).

:::

::: {.fragment .fade-in-then-semi-out}

Observable JS se distingue por su tiempo de ejecuci√≥n reactivo, que es 
especialmente adecuado para la exploraci√≥n y el an√°lisis de datos interactivos.

:::

## Ejemplo interactivo con Observable JS {.title-top}

<br>

Conversor de temperatura de ‚ÑÉ a ‚Ñâ

<br>

```{ojs}
viewof temp = Inputs.range([0, 99], {step: 1, value: 0, label: htl.html`Temp. &#x2103;`})
```

Celsius = \${d3.format(".0f")(temp)}‚ÑÉ y Fahrenheit = \${d3.format(".1f")(temp \* 9/5 + 32)}‚Ñâ.

. . . 

<br>
````code
```{{ojs}}
viewof temp = Inputs.range([0, 99], {step: 1, value: 0, label: htl.html`Temp. &#x2103;`})
```
Celsius = \${d3.format(".0f")(temp)}‚ÑÉ y Fahrenheit = \${d3.format(".1f")(temp \* 9/5 + 32)}‚Ñâ.

````


## Entonces, ¬øqu√© es Quarto? {.title-top}

> Quarto es una interfaz de *l√≠nea de comandos* (**CLI**) que representa formatos de texto sin formato (**.qmd**, .rmd, .md) o formatos mixtos (**.ipynb**/Jupyter notebook) en informes est√°ticos *PDF*/*Word*/*HTML*, *libros*, *sitios web*, *presentaciones* y m√°s.

```{py}
#| eval: false
#| echo: true
#| code-line-numbers: "|1|4|10"
cballejo$ quarto --help

  Usage:   quarto
  Version: 1.7.31

  Description:
    Quarto CLI

  Options:
    -h, --help     - Show this help.                            
    -V, --version  - Show the version number for this program.  

  Commands:
    render          [input] [args...]   - Render input file(s) to various document types.            
    preview         [file] [args...]    - Render and preview a document or website project.          
    serve           [input]             - Serve a Shiny interactive document.                        
    create-project  [dir]               - Create a project for rendering multiple documents          
    convert         <input>             - Convert documents to alternate representations.            
    pandoc          [args...]           - Run the version of Pandoc embedded within Quarto.          
    run             [script] [args...]  - Run a TypeScript, R, Python, or Lua script.                
    install         <type> [target]     - Installs an extension or global dependency.                
    publish         [provider] [path]   - Publish a document or project. Available providers include:
    check           [target]            - Verify correct functioning of Quarto installation.         
    help            [command]           - Show this help or the help of a sub-command.    
```

## Software Quarto {.title-top .centrado}

<br>

-   El sitio web de `Quarto` es <https://quarto.org/>

-   La **versi√≥n actual** es 1.7.31 (Windows) del 12/05/2025

-   La **gu√≠a oficial** se puede encontrar en <https://quarto.org/docs/guide/>

-   **RStudio Desktop** incluye una versi√≥n de Quarto en su instalaci√≥n desde la versi√≥n 2022.07.01 pero conviene actualizarlo de forma independiente

![](images/Captura7.PNG){.absolute top="500" left="620" width="550"}


## Otras caracter√≠sticas {.title-top}

::: {.fragment .fade-in-then-semi-out}

- Tiene m√∫ltiples formatos modernos de salidas unificado la funcionalidad de muchos paquetes del ecosistema R Markdown (rmarkdown, bookdown, distill, xaringan, etc.)

:::

::: {.fragment .fade-in-then-semi-out}

- Implementa funciones m√°s atractivas y √∫tiles en todos los productos: pesta√±as, resaltado de sintaxis, diagramas, etc.

:::

::: {.fragment .fade-in-then-semi-out}

- Se pueden renderizar los documentos viejos `.rmd` (RMarkdown) o `.ipynb` (cuadernos jupyter de python) con Quarto.

:::

::: {.fragment .fade-in-then-semi-out}


- Viene incluido en otros editores como VS Code

:::

::: {.fragment .fade-in-then-semi-out}

- Soporta `htmlwidgets` en R y Jupyter widgets para Python/Julia adem√°s de Observable JS

:::

## Por qu√© usar Quarto en lugar de RMarkdown? {.title-top}

. . . 

- Quarto no es muy diferente a **RMarkdown**, m√°s bien es un RMarkdown de nueva generaci√≥n (*next-generation*)

. . .

- Posee mejor accesibilidad y funciones m√°s completas listas para usar

. . .

- **RMarkdown** a√∫n tiene soporte pero todas las novedades y mejoras se est√°n desarrollando solo para `Quarto`

. . .

- Si en el futuro incorporas alg√∫n otro lenguaje de programaci√≥n/an√°lisis podes seguir utilizandolo

. . .

- Podes elegir otros editores y `Quarto` seguir√° funcionando


## El universo de Quarto es enorme {.title-top transition="zoom"}

![](images/Captura4.PNG){.absolute top="200" left="140" width="1650"}


## Anatomia de un `.qmd` {.title-top .smaller}

. . .

Al igual que los **.Rmd** de **RMarkdown** el archivo fuente de `Quarto` es de texto plano

. . .

Tiene una cabecera `YAML` con metadatos 


:::: {.columns style="font-size: 50px;"}

::: {.column width="45%"}

``` yaml
format: html
engine: knitr
```

:::

::: {.column width="55%"}

``` yaml
format: html
engine: jupyter
```

:::

::::

. . . 

Suele tener c√≥digo incluido



:::: {.columns style="font-size: 50px;"}

::: {.column width="45%"}

````code
```{{r}}
library(dplyr)
mtcars |> 
  group_by(cyl) |> 
  summarize(mean = mean(mpg))
```
````

:::

::: {.column width="55%"}

````code
```{{python}}
from siuba import *
(mtcars
  >> group_by(_.cyl)
  >> summarize(avg_mpg = _.mpg.mean()))
```
````

:::

::::

. . .

Y texto narrativo

::: {style="font-size: 50px;"}
``` markdown
# Cabecera 1
Esto es texto en **negrita**, esto en *it√°lica* y esta otra una 
![imagen](image.png){fig-alt="Texto alternativo para esta imagen"}.
```

:::

## Ejemplo de un .qmd {.title-top}

Los archivos `.qmd` responden estructuralmente al modelo de programaci√≥n literaria ([Literate programming](https://es.wikipedia.org/wiki/Programaci%C3%B3n_literaria))

<br>

    ---
    title: "ggplot2"
    date: "18/04/2024"
    format: html
    ---

    ## Calidad del aire

    Esta es la relaci√≥n entre la temperatura y el nivel de ozono.

    ```{{r}}
    #| label: fig-calidad_aire
    library(ggplot2)
    ggplot(airquality, aes(Temp, Ozone)) + 
      geom_point() + 
      geom_smooth(method = "loess"
    )
    ```


## Metadatos: YAML {.title-top}

. . . 

<br>

- Los metadatos que se definen en el encabezado YAML que todos los archivos `.qmd` tienen son procesados en muchas etapas del renderizado y puede influir en el documento final de varias formas. 

. . . 

- Siempre se colocan al principio del documento y lo lee **Pandoc**, **Quarto** y **knitr**. 

. . . 

- En su recorrido, la informaci√≥n que contiene suele afectar el c√≥digo, el contenido y el proceso de renderizado.

. . . 

- Muchas de las opciones de c√≥digo YAML para Quarto se pueden encontrar en su [documentaci√≥n](https://quarto.org/docs/reference/)  

## Texto y otros elementos {.title-top}

. . . 

<br>

- `Quarto` se basa en **Pandoc** y utiliza su variaci√≥n de [Markdown](https://es.wikipedia.org/wiki/Markdown) como sintaxis para documentos. 

. . . 

- El **Markdown** de Pandoc es una versi√≥n ampliada y ligeramente revisada de la sintaxis Markdown de [John Gruber](https://en.wikipedia.org/wiki/John_Gruber).

. . . 

- Markdown es un lenguaje de marcas sencillo dise√±ado para ser f√°cil de escribir y, lo que es m√°s importante, f√°cil de leer.

. . . 

- Es el mismo que se utiliza en el formato anterior de RMarkdown (archivos .Rmd)

## C√≥digo {.title-top}

. . . 

- El c√≥digo se puede insertar a trav√©s de chunks (fragmentos) en distintos lenguajes

````code
```{{r}}
#| Aqu√≠ van los metadatos con las opciones de ejecuci√≥n

Aqu√≠ va el c√≥digo
```
````
. . . 

- Las opciones de ejecuci√≥n del c√≥digo incluido dentro de estos fragmentos se realiza mediante metadatos con el formato #|

. . . 

- Se pueden definir opciones de salida, figura, procesado, etc. Ver [gu√≠a](https://quarto.org/docs/computations/execution-options.html).

. . . 

- Tambi√©n se puede incluir [c√≥digo en l√≠nea](https://quarto.org/docs/computations/inline-code.html) en el texto. 

```{r}
#| echo: false

radio <- 5
```


````code
```{{r}}
radio <- 5
```
````
(El radio del circulo es \`\{r\} radio\`). El radio del circulo es `{r} radio`

## Algunos ejemplos para visualizar {.title-top}

::: columns
::: {.column width="50%"}

<br>

- [HTML paginado -estilo Tufte-](https://quarto-dev.github.io/quarto-gallery/page-layout/tufte.html)

- [Presentaci√≥n revealjs](https://apreshill.github.io/palmerpenguins-useR-2022/)

- [Libro web](https://r4csr.org/)

- [Sitio web](https://sta210-s22.github.io/website/)

- [Documentos interactivos -shiny-](https://jjallaire.shinyapps.io/diamonds-explorer/)

- [Tableros](https://mine-cetinkaya-rundel.github.io/ld-dashboard/)

:::

::: {.column width="50%"}

<br>

![](images/Captura9.PNG){width="80%"}

:::

:::

## Cabecera YAML: Opciones de salida {.title-top}

<br>

``` yaml
---
format: html
---
```

. . .

``` yaml
---
format: pdf
---
```

. . .

``` yaml
---
format: typst
---
```

`typst` es un [nuevo sistema de composici√≥n tipogr√°fica](https://typst.app/docs/) basado en marcas para ciencia.

. . .

Se le pueden agregar opciones. Las opciones deben estar debajo del formato principal (los espacios son importante y hay que respetarlos -identaci√≥n-)

``` yaml
---
format: 
  html:
    toc: true
    code-fold: true
---
```

## YAML es sensible a la identaci√≥n {.title-top}

::: columns
::: {.column width="70%"}
``` yaml
---
format:html # invalido, falta espacio luego de :
---

---
format: # invalido, se lee como formato ausente
html
---

---
format: 
  html: # valido pero necesita de opciones posteriores
---
```

El formato v√°lido puede ser diferente seg√∫n lo que se necesite.

``` yaml
format: html # valido - hay espacio

# valido - formato con opciones
format: 
  html:
    toc: true
```
:::

::: {.column width="30%"}
![](images/trabajando.jpg){.r-stretch}
:::
:::

## Ventajas de RStudio {.title-top}

<br>

RStudio (tambi√©n algunos otros editores como VSCode) integran entre sus herramientas la finalizaci√≥n enriquecida: podemos comenzar con una palabra y tabular (TAB) para completar, o presionar `Ctrl + espacio` para ver todas las opciones disponibles.

![](images/RStudio1.PNG){.absolute top="350" left="550" width="700"}

## Texto y Markdown {.title-top transition="zoom"}

<br>

Inicialmente y para el uso general conviene aprovechar el `modo Visual` de RStudio para incorporar marcas de lenguaje Markdown. Pr√°cticamente todos los elementos incorporados con formato markdown aplican en los diferentes formatos de salida (HTML, pdf, etc)

![](images/RStudio2.PNG){.absolute top="320" left="400" width="1000"}

## Bloques {.title-top}

Pandoc y, por tanto, Quarto aceptan bloques *Divs* y *Spans* propios del HTML con sintaxis delimitada por :::

Estructura general:

-   Comienza y termina con igual n√∫mero de : - m√≠nimo de 3 :::
-   Agregar llaves para indicar el inicio de la clase `{.class}` o `{varias-clase}`


. . .

```         
::: {style="border-left:10px solid purple"}

Este contenido tiene un dise√±o de borde izquierdo violeta

:::
```

. . .

::: {style="border-left:10px solid purple"}
*Este contenido tiene un dise√±o de borde izquierdo violeta*
:::

. . .

-   Se puede pensar en una divisi√≥n ::: como un `<div>` **HTML** pero que tambi√©n sirve cuando la salida es en PDF.

## Bloques de llamadas {.title-top}

<br>

El formato b√°sico de un bloque de llamadas es:

```{}
::: {.callout-*}
## T√≠tulo del bloque

Texto inclu√≠do
:::
```

donde el * se reemplaza por el tipo de bloque. Adem√°s se puede configurar la apariencia y si se muestra o no el √≠cono asociado.

. . .

::: callout-note
## Nota {.title-top}

Existen cinco tipos de leyendas, que incluyen: `note` (nota), `tip` (consejo), `warning` (advertencia), `caution` (precauci√≥n), e `important` (importante)
:::






## Bloques de llamadas {.title-top}

<br>

::: callout-warning
## Advertencia

Estos bloques facilitan una forma sencilla de llamar la atenci√≥n, por ejemplo, sobre esta advertencia.
:::

. . .

::: callout-important
## Importante

Se pueden editar los titulos con doble #. Por ejemplo: \## Importante
:::

. . .

::: callout-tip
## Consejo

Tip o consejo dado
:::

. . .

::: callout-caution
## Precauci√≥n

Esto se encuentra bajo construcci√≥n
:::

## Bloques de l√≠nea (Spans) {.title-top}

Estructura general:

-   Encerrar el texto con corchetes \[\].
-   Agregar llaves para indicar el inicio de la clase `{.class}` o `{varias-clases}`

\[texto\]{.class}

. . .

-   Estos spans entre corchetes [texto]{.class} se pueden considerar como un `<span .class>Texto</span>` de **HTML** pero nuevamente estos son compatibles para aplicar atributos nativos de Pandoc/Quarto.

<br>

Este es un texto con formato \[especial\]{style="color:orange;"}.

. . .

Este es un texto con formato [especial]{style="color:orange;"}.

-   Tanto los Divs como los Spans se pueden agregar desde el modo Visual: *Format -\> Div...* y *Format -\> Span...*

## Figuras {.nostretch .title-top}

-   Sintaxis b√°sica de markdown

\![Mar del Plata\](images/mdp.jpg)

![Mar del Plata](images/mdp.jpg)

## Figuras {.nostretch .title-top}

-   Sintaxis markdown con opciones

\![Mar del Plata\](images/mdp.jpg){width=120%}

![Mar del Plata](images/mdp.jpg){width="120%"}

## Figuras {.nostretch .title-top}

-   Desde c√≥digo R

```{r}
#| echo: fenced
#| out-width: 50%
#| fig-align: right


knitr::include_graphics("images/mdp.jpg")
```

## Fragmentos / columnas

::: columns
::: {.column width="50%"}
\![Mar del Plata\](images/mdp.jpg){fig-align="left"}

![Mar del Plata](images/mdp.jpg){fig-align="left"}

Las columnas se construyen con bloques Divs ::: columns y luego ::: {.column width="50%"} para cada una de ellas (en este ejemplo que son 2). Cada bloque se cierra con :::
:::

::: {.column width="50%"}
\![\](images/mdp2.png){fig-align="right" .lightbox}

![](images/mdp2.PNG){.lightbox fig-align="right"}

La opci√≥n `.lightbox` utiliza la librer√≠a de javascript [GLightbox](https://biati-digital.github.io/glightbox/) para mostrar un efecto sobre la imagen cuando pulsamos sobre ella.
:::
:::

## Pesta√±as (TabSet)  {.title-top}

::: panel-tabset
## Codigo

```{r}
#| echo: fenced
#| eval: false
head(datasets::iris)
```

Las pesta√±as son un bloque Divs especiales ::: {.panel-tabset} :::

El nombre de cada pesta√±a se establece con **\## Nombre**

Al ser din√°micas, solo funcionan en salidas HTML.

## Salida

```{r}
#| eval: true
#| echo: false
head(datasets::iris)
```
:::


## Enlaces web {.title-top}

<br>

Existen varios tipos de "enlaces" o hiperv√≠nculos.

<br>

::: columns
::: {.column width="65%"}
**Markdown**

``` markdown
Se pueden insertar links en formato Markdown vinculados 
a un texto como este de [Quarto](https://quarto.org/), 
URL directas como <https://www.ine.gov.ar/> y 
enlaces a [otros lugares](#docu-estaticos-title) 
en el mismo documento. 
La sintaxis es similar a incrustar un imagen en l√≠nea: 
![Nombre](imagen.png). 
```
:::

::: {.column .fragment width="35%"}
**Salida**

Se pueden insertar links en formato Markdown vinculados a un texto como este de [Quarto](https://quarto.org/), URL directas como <https://www.ine.gov.ar/> y 
enlaces a [otros lugares](#docu-estaticos-title) en el mismo documento. 
La sintaxis es similar a incrustar un imagen en l√≠nea: ![Logo INE](INE.gif){style="width:30px;"}.
:::
:::



## Listas {.title-top .smaller}

<br>

Listas sin orden:

::: columns
::: {.column width="50%"}
**Markdown:**

``` markdown
-   Lista sin orden       
    -   sub-item 1         
    -   sub-item 1         
        -   sub-sub-item 1 
```
:::

::: {.column .fragment width="50%" fragment-index="1"}
**Salida**

-   Lista sin orden
    -   sub-item 1\
    -   sub-item 1
        -   sub-sub-item 1
:::
:::

Listas ordenadas:

::: columns
::: {.column width="50%"}
**Markdown:**

``` markdown
1. Lista ordenada            
2. item 2                  
   i. sub-item 1          
      a.  sub-sub-item 1
```
:::

::: {.column .fragment width="50%" fragment-index="2"}
**Salida**

1.  Lista ordenada\
2.  item 2
    i.  sub-item 1
        a.  sub-sub-item 1
:::
:::

## Citas

<br>

**Markdown:**

``` markdown
> Cambiemos nuestra actitud tradicional hacia la construcci√≥n 
> de programas: en lugar de imaginar que nuestra tarea principal
> es indicarle a una computadora qu√© hacer, concentr√©monos m√°s
> bien en explicar a los seres humanos lo que queremos que haga
> una computadora. - Donald Knuth
```

. . .

<br>

**Salida:**

> Cambiemos nuestra actitud tradicional hacia la construcci√≥n de programas: en lugar de imaginar que nuestra tarea principal es indicarle a una computadora qu√© hacer, concentr√©monos m√°s bien en explicar a los seres humanos lo que queremos que haga una computadora. - Donald Knuth

::: aside
"Literate Programming", The Computer Journal 27 (1984), p. 97. (Reprinted in Literate Programming, 1992, p. 99.) Literate Programming (1984) <br> <br>
:::

## Tablas {.title-top}

<br>

Tablas Markdown

**Markdown:**

``` markdown
| Derecha | Izquierda | Predeterminado | Centrado |
|--------:|:----------|----------------|:--------:|
|    12   |    12     |       12       |    12    |
|   123   |   123     |      123       |   123    |
|     1   |     1     |        1       |     1    |
```

. . .

<br>

**Salida:**

| Derecha | Izquierda | Predeterminado | Centrado |
|--------:|:----------|----------------|:--------:|
|      12 | 12        | 12             |    12    |
|     123 | 123       | 123            |   123    |
|       1 | 1         | 1              |    1     |

## Tablas Grid (cuadr√≠cula) {.title-top}

<br>

Las tablas cuadr√≠cula son un tipo m√°s avanzado de tablas de Markdown que permiten otros elementos (m√∫ltiples p√°rrafos, bloques de c√≥digo, listas, etc.)

<br>

**Markdown:**

``` markdown
+---------------+---------------+--------------------+
| Formato       | Extensi√≥n     | Ventajas           |
+===============+===============+====================+
| Documento     | pdf           | - Seguro           |
| portable      |               | - Universal        |
+---------------+---------------+--------------------+
| Word          | docx          | - Editable         |
|               |               | - Universal        |
+---------------+---------------+--------------------+

: Ejemplo tabla cuadr√≠cula 
```

## Tablas Grid (cuadr√≠cula) {.title-top}

<br>

**Salida:**

<br>

+--------------------+----------------+----------------+
| Formato            | Extensi√≥n      | Ventajas       |
+====================+================+================+
| Documento portable | pdf            | -   Seguro     |
|                    |                | -   Universal  |
+--------------------+----------------+----------------+
| Word               | docx           | -   Editable   |
|                    |                | -   Universal  |
+--------------------+----------------+----------------+

: Ejemplo tabla cuadr√≠cula

## Tablas cuadr√≠cula: Alineaci√≥n {.title-top}

<br>

-   Las alineaciones se pueden especificar como en las tablas anteriores, colocando dos puntos en los l√≠mites de la l√≠nea de separaci√≥n despu√©s del encabezado:

```         
+--------------------+---------------+--------------------+
| Derecha            | Izquierda     | Centrado           |
+===================:+:==============+:==================:+
| Documento portable | pdf           | -  Seguro          |
+--------------------+---------------+--------------------+
```

. . .

<br>

-   Para tablas sin encabezado, los dos puntos van en la l√≠nea superior:

```         
+--------------:+:--------------+:------------------:+
| Derecha       | Izquierda     | Centrado           |
+---------------+---------------+--------------------+
```

## Tablas cuadr√≠cula: Creaci√≥n {.title-top}


:::: columns

::: {.column width="50%"}

::: incremental
-   Tengamos en cuenta que las tablas cuadr√≠cula son bastante complicadas de escribir con un editor de texto plano porque, a diferencia de las tablas comunes, los indicadores de columna deben alinearse.


-   ¬°El Editor Visual puede ayudar a crear estas tablas! para profundizar ver [Gu√≠a Quarto](https://quarto.org/docs/visual-editor/content.html#editing-tables)


-   Tambi√©n podemos utilizar herramientas online como [TablesGenerator](https://www.tablesgenerator.com/markdown_tables)
:::

:::

::: {.column width="50%"}

![](images/letras.jpg){.absolute top="200" left="1250" width="500"}

:::

::::

## F√≥rmulas {.title-top}



Al igual que en RMarkdown se puede insertar f√≥rmulas matem√°ticas Latex en linea o en imagen completa, utilizando \$ o \$\$ seg√∫n corresponda.

-   Este es un ejemplo de formula en linea $\sqrt{\frac{\alpha}{2}}$

``` markdown
$\sqrt{\frac{\alpha}{2}}$
```



-   La siguiente es una formula completa:

$$
R(t)= A \left(\frac{E_0}{\rho_0}\right)^{1/5}t^{2/5}
$$
``` markdown
$$
R(t)= A \left(\frac{E_0}{\rho_0}\right)^{1/5}t^{2/5}
$$
``` 

## Caracteres especiales, emojis y listas de definiciones {.title-top}

![](images/tipos_0.webp){.absolute top="230" left="1050" width="600"}

<br>

En el modo Visual se pueden insertar facilmente caracteres especiales de distinto tipo, emojis y listas de t√©rminos. Por ejemplo:

<br>

Caracteres especiales:

‚ë° ‚âã ùÑû ‚çæ ‚ó¥ ‚≠Ü

<br>

Emojis:

üòÄ ü•∂ üëç ü§°

<br>

Listas de definici√≥n

**Clase** en programaci√≥n orientada a objetos

:   Es una plantilla que define las caracter√≠sticas y comportamientos de una entidad




## Diagramas {.title-top}

`Quarto` tiene soporte nativo para incrustar diagramas [Mermaid](https://mermaid-js.github.io/mermaid/#/) y [Graphviz](https://graphviz.org/) . Esto permite crear diagramas de flujo, diagramas de secuencia, diagramas de estado, diagramas de Gantt y otros utilizando una sintaxis de texto plano inspirada en Markdown.

```{{{mermaid}}}
flowchart LR
  A[Inicio] --> B(Pre-proceso)
  B --> C{Decisi√≥n}
  C --> D[Resultado 1]
  C --> E[Resultado 2]
```

![](images/diagrama.PNG){width="60%"}

-   Para ver m√°s sobre la [documentaci√≥n de Mermaid.js](https://mermaid-js.github.io/mermaid/#/flowchart)

## Inclusi√≥n de c√≥digo en Quarto {.title-top}

<br>

En todo documento Quarto se puede incluir c√≥digo de diferentes lenguajes de programaci√≥n (R, python, julia, javascript, etc).

. . .

<br>

Habitualmente el c√≥digo sirve para mostrar resultados estad√≠sticos en forma de tabla y/o gr√°fico. Otras veces el c√≥digo produce diversas tareas que no se muestran hasta tanto se produzca la salida de resultados. Y en ocasiones, cuando el producto tiene un fin docente sobre el lenguaje de programaci√≥n en si, se muestran las l√≠neas de c√≥digo junto a lo que produce.

. . . 

<br>

Toda la ejecuci√≥n del c√≥digo se maneja desde las opciones de ejecuci√≥n que se configuran como metadatos dentro de los fragmentos (chunks).

## Opciones de ejecuci√≥n de c√≥digo {.title-top}



Algunas de las opciones de control de ejecuci√≥n de los chunck de c√≥digo.

::: {style="font-size: 1em"}
+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Opci√≥n    | Descripci√≥n                                                                                                                                                                                       |
+===========+===================================================================================================================================================================================================+
| `eval`    | Evalua el codigo del chunk (si es `false`, saltea el c√≥digo y no lo ejecuta).                                                                                                                     |
+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `echo`    | Incluye el c√≥digo fuente en la salida                                                                                                                                                             |
+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `output`  | Incluye el resultado de la ejecuci√≥n del c√≥digo en la salida (`true`, `false`, or `asis` para indicar que muestre los resultados en forma cruda).                                                 |
+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `warning` | Gestiona las advertencias en la salida.                                                                                                                                                           |
+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `error`   | Gestiona los errores en la salida.                                                                                                                                                                |
+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `include` | Evita que se incluya cualquier salida (c√≥digo o resultados) (por ejemplo `include: false` suprime toda la salida del bloque de c√≥digo).                                                           |
+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `message` | Gestiona los mensajes en la salida                                                                                                                                                                |
+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `fig-*`   | Familia de opciones para las figuras (alto, ancho, alineaci√≥n, nombre, resoluci√≥n, etc)                                                                                                           |
+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
:::


## Tablas desde c√≥digo {.title-top}

<br>

Salida directa, igual que en consola y est√©ticamente feas.

```{r}
#| echo: fenced
library(datos)

pinguinos |> 
  slice(1:6)
```

## Tablas desde c√≥digo {.title-top}

<br>

El paquete **knitr**, incu√≠do en RStudio, puede convertir las salidas estos dataframes en tablas visuales con `knitr::kable()`:

<br>

```{r}
library(knitr)

pinguinos |> 
  slice(1:6) |> 
  kable()
```

## Tablas desde c√≥digo {.title-top}

<br>

Existen numerosos paquetes para darle formato a las tablas producidas mediante c√≥digo. 

Un ejemplo muy completo es el paquete **flextable**, que vimos en clases anteriores.

Adem√°s de salidas HTML es compatible con pdf y Word (docx). 

La documentaci√≥n se encuentra en este [enlace](https://ardata-fr.github.io/flextable-book/)

<br>

```{r}
library(flextable)

head(pinguinos) |> 
flextable() |> 
fontsize(size = 26, part = "all") |> 
height_all(height = 1, part = "all", unit = "in") |> 
colformat_num(big.mark = "", decimal.mark = ",", digits = 2, na_str = "N/A") |>  
theme_zebra()
```

## Tablas desde c√≥digo {.title-top}

<br>

Otro paquete para tablas elaboradas es **gt**. 

Aqu√≠ podemos encontrar [todo lo que ofrece](https://gt.rstudio.com/).

<br>

```{r}
#| output-location: column-fragment

library(gt)

head(pinguinos) |> 
  gt() |>
 tab_options(table.font.size = 40) |> 
  tab_style(
    style = list(
      cell_fill(color = "pink"),
      cell_text(style = "italic")
      ),
    locations = cells_body(
      columns = largo_pico_mm,
      rows = largo_pico_mm > 40
    )
  )
```


## Gr√°ficos desde c√≥digo {.title-top auto-animate="true"}

<br>

:::: columns

::: {.column width="50%"}

```` markdown
```{{r}}
library(datos)
library(ggplot2)

pinguinos |> 
  ggplot(aes(x = largo_pico_mm,
                     y = alto_pico_mm,
                     col = isla)) +
  geom_point()
```
````
:::

::: {.column .fragment width="50%"}

```{r}
#| echo: false
library(datos)
library(ggplot2)

pinguinos |> 
  ggplot(aes(x = largo_pico_mm,
                     y = alto_pico_mm,
                     col = isla)) +
  geom_point() +
  theme_grey(base_size = 18)
```

:::

::::

## Ejemplo: Gr√°ficos desde c√≥digo {.title-top auto-animate="true"}

<br>

::: columns
::: {.column width="50%"}
```` markdown
```{{r}}
#| fig-width: 5
#| fig-height: 3

library(datos)
library(ggplot2)

pinguinos |> 
  ggplot(aes(x = largo_pico_mm,
                     y = alto_pico_mm,
                     col = isla)) +
  geom_point()
```
````
:::

::: {.column .fragment width="50%"}
```{r}
#| echo: false
#| fig-width: 5
#| fig-height: 3

library(datos)
library(ggplot2)

pinguinos |> 
  ggplot(aes(x = largo_pico_mm,
                     y = alto_pico_mm,
                     col = isla)) +
  geom_point() +
  theme_grey(base_size = 18)
```
:::
:::

## Ejemplo: Gr√°ficos desde c√≥digo {.title-top auto-animate="true"}

<br>

::: columns
::: {.column width="50%"}
```` markdown
```{{r}}
#| fig-width: 5
#| fig-height: 3
#| fig-cap: "Tama√±o de los ping√ºinos en 
tres islas del Archipelago Palmer."
#| fig-alt: "Diagrama de dispersi√≥n que 
muestra el tama√±o de los picos de los 
ping√ºinos en tres islas"

library(datos)
library(ggplot2)

pinguinos |> 
  ggplot(aes(x = largo_pico_mm,
                     y = alto_pico_mm,
                     col = isla)) +
  geom_point()
```
````
:::

::: {.column .fragment width="50%"}
```{r}
#| echo: false
#| fig-width: 5
#| fig-height: 3
#| fig-cap: "Tama√±o de los ping√ºinos en tres islas del Archipelago Palmer."
#| fig-alt: "Diagrama de dispersi√≥n que muestra el tama√±o de los picos de los ping√ºinos en tres islas"


library(datos)
library(ggplot2)

pinguinos |> 
  ggplot(aes(x = largo_pico_mm,
                     y = alto_pico_mm,
                     col = isla)) +
  geom_point()+
  theme_grey(base_size = 18)
```
:::
::::


## Temas est√©ticos {.title-top}


Los documentos HTML renderizados con Quarto usan **Bootstrap 5** de forma predeterminada. Esto se puede personalizar a trav√©s de la opci√≥n de `theme:` en la cabecera YAML.

```{.yaml}
theme: default # bootstrap 5 predeterminado
theme: cosmo   # tema cosmo bootswatch 
theme: pandoc  # tratamiento de pandoc predeterminado
theme: none    # no usa ning√∫n tema css 
```

Quarto incluye 25 temas del proyecto [Bootswatch](https://bootswatch.com/), entre los cuales se encuentran: `lumen`, `minty`, `journal`, etc.

En la cabecera YAML, junto al tema se puede definir algunas variables est√©ticas que se usar√°n al renderizar el documento, como `mainfont`, `fontsize`, `fontcolor`, etc. 

```{.yaml}
title: "Mi Documento"
format:
  html: 
    theme: lumen      # tema lumen
    fontsize: 12pt    # tama√±o de la fuente en 12 puntos
    fontcolor: blue   # color azul
```

## Personalizaci√≥n {.title-top}

<br>

Podemos realizar una amplia personalizaci√≥n de temas utilizando [Sass](https://sass-lang.com/). Existen m√°s de 1400 variables **Sass** que controlan fuentes, colores, relleno, bordes y mucho m√°s. 

Este idioma, extensi√≥n de CSS, se utiliza en archivos `.scss` que se incluyen en la cabecera YAML.

```{.yaml}
theme:
  - lumen
  - custom.scss
```

<br>

El contenido del archivo `custom.scss`, que debe estar ubicado en la misma carpeta donde est√° el `.qmd`, podr√≠a ser:

```{.yaml}
/*-- scss:defaults --*/

$h2-font-size: 20pt;    # tama√±o de fuente 20 pt en cabecera 2
$font-size-base: 12pt;  # tama√±o de fuente 12 pt en texto base
$link-color: #af3434;   # color de enlace web
```

## Otros formatos de salida posibles {.title-top}

<br>

Editando la cabecera YAML se puede definir formatos de documentos distintos a HTML.

Entre las opciones de documentos con fines de impresi√≥n se encuentran:

<br>

::: columns
::: {.column width="40%"}

<br>

-   **PDF** (en base a **LaTeX**)

-   **PDF** (en base a **typst**)

-   **docx** (archivo **Word**)
:::

::: {.column width="60%"}
![](images/tipos.webp){.absolute top="350" left="900" width="700"}
:::
:::

## PDF (LaTeX) {.title-top}

![](images/adobe_pdf.PNG){.absolute top="0" left="1500" width="280"}

<br> <br> <br>

. . .

Para procesar documentos PDF de Quarto (documentos tradicionales pdf de RMarkdown) nuestra computadora debe cumplir con el requerimiento de tener instalado una distribuci√≥n actualizada de **Tex**.

. . .

Existen varios motores PDF pero se recomienda utilizar [TinyTeX](https://yihui.org/tinytex/) (basado en TexLive) que podemos instalar f√°cilmente desde RStudio.

. . .

<br>

Otras distribuciones posibles para Windows son: **MikTex** o **Tex Live**, pero deben descargase e instalarse independientemente de RStudio.

## TinyTex {.title-top}

<br>

**TinyTeX** es una distribuci√≥n **LaTeX** personalizada, basada en *TeX Live*, que es peque√±a en tama√±o pero funciona bien en la mayor√≠a de los casos, especialmente para usuarios de R.

Se instala ejecutando la siguiente linea en la **Terminal** de **RStudio**

<br>

``` markdown
quarto install tinytex --update-path
```

<br>

Luego activamos la opci√≥n:

**Use tinytex when compiling .tex files**

en **Global options** de RStudio y reiniciamos.

## Cabecera PDF {.title-top}

<br>

Las cabecera b√°sica de documentos PDF basados en **LaTeX** es:

``` rmardown
---
title: "Mi Documento"
format:
  pdf:
    toc: true
---
```

\* en este ejemplo, adem√°s activamos tabla de contenidos.

La mayor√≠a de las *opciones de ejecuci√≥n* vistas para HTML sirven para este tipo de documentos.

Quarto utiliza clases de documentos [KOMA Script](https://ctan.org/pkg/koma-script) de forma predeterminada para libros y documentos PDF.

## Clases de documentos {.title-top}

<br>

La opci√≥n de ejecuci√≥n `documentclass:` posibilita cambiar de clase utilizando la configuraci√≥n KOMA Script.

| Opci√≥n   | Descripci√≥n                                                                                         |
|------------------------------------|------------------------------------|
| scrartcl | Es la clase est√°ndar. Dise√±ada para art√≠culos (m√°s o menos cortos)                                  |
| scrreprt | Clase reportes, similar a los libros. Se diferencian principalmente en los valores predeterminados. |
| scrbook  | Dise√±ada para libros desde aproximadamente una docena hasta miles de p√°ginas                        |

## Clases de documentos {.title-top}

<br>

Seleccionar que clase de documento pdf queremos tendr√° que ver con lo que estemos produciendo.

Por ejemplo, los art√≠culos estan configurados predeterminandamente con una sola cara, lo mismo que los reportes. En cambio, los libros son de doble cara.

De todas maneras, las opciones se pueden cambiar con `classoption:` (oneside, twoside)

<br>

::: {.callout-note .especial appearance="simple" icon="false"}
## Ejemplo

Configurar el documento de clase `scrbook` automatizar√° muchas de las necesidades comunes para imprimir y encuadernar archivos PDF en un libro f√≠sico (es decir, los cap√≠tulos comienzan en p√°ginas impares, tama√±os de m√°rgenes alternos, etc.)
:::

## Otras opciones de ejecuci√≥n {.title-top}

<br>

| Opci√≥n      | Descripci√≥n                                              |
|-------------|----------------------------------------------------------|
| `papersize` | Configura tama√±o de papel                                |
| `lot`       | Activa tabla de tablas                                   |
| `lof`       | Activa tabla de figuras                                  |
| `fontsize`  | Tama√±o de fuente                                         |
| `mainfont`  | Fuente principal                                         |
| `geometry`  | Llama a paquete latex geometr√≠as - define margenes, etc. |

## Librer√≠as latex {.title-top}

<br>

Algunas librer√≠as Latex como `geometry` vienen implementadas dentro de **TinyTex** y asociadas a la cabecera YAML de Quarto. Otras librer√≠as pueden llamarse desde la opci√≥n `include-in-header` para inyectar comandos **Latex**.

Por ejemplo, incluyendo una fuente espec√≠fica para el texto.

``` markdown
format:
  pdf:
    include-in-header:
      - text: |
          \usepackage{sourcesanspro}
```

<br>

::: {.callout-note .especial appearance="simple" icon="false"}
Quarto instalar√° todos los paquetes especificados mediante inclusiones que a√∫n no haya instalado localmente durante la renderizaci√≥n del documento usando TinyTex.
:::

## Latex puro {.title-top}

<br>

Al crear un documento PDF, Pandoc permite el uso de c√≥digo **LaTex** puro entre el markdown.

::: columns
::: {.column width="40%"}
``` markdown
\begin{tabular}{ll}
A & B \\
A & B \\
\end{tabular}
```
:::

::: {.column width="60%"}
![](images/latex.png){.absolute top="200" left="1050" width="450"}
:::
:::

Si bien es muy conveniente para este formato, el c√≥digo se ignora cuando se procesa en otros como HTML y Word.

<br>

> Tengamos en cuenta que en algunos casos, el LaTeX puro requerir√° paquetes de LaTeX adicionales (que deberemos incluir en la cabecera).

## PDF (typst) {.title-top}

![](images/typst.png){fig-align="center" width="70%"}

**Typst** es un nuevo sistema de composici√≥n tipogr√°fica de c√≥digo abierto basado en un lenguaje de marcas que est√° dise√±ado para ser tan potente como LaTeX y al mismo tiempo mucho m√°s f√°cil de aprender y usar. Genera buenos resultados en PDF con tiempos de renderizado muy r√°pidos.

<br>

> Dado que Typst est√° en desarrollo activo y fue incorporado en la √∫ltima versi√≥n de Quarto, todav√≠a existen algunas limitaciones en el soporte. Es decir, que algunas caracter√≠siticas nativas como el dise√±o de p√°gina avanzado no est√°n del todo implementadas.

## Cabecera typst {.title-top}

<br>

``` rmardown

---
title: "Mi Documento"
format:
  typst:
    columns: 2
---
```

\* en esta cabecera, adem√°s definimos 2 columnas para el documento.

La gran mayor√≠a de opciones de cabecera generales de YAML para Quarto funcionan en **typst**.

## Dise√±o de p√°gina {.title-top}

<br>

Se puede controlar el dise√±o de la p√°gina mediante opciones de cabecera:

-   `papersize`: tama√±o de la p√°gina ("a4", "us-letter", "us-legal", etc)
-   `margin`: m√°rgenes de la p√°gina (top, right, bottom, left - medido en pulgadas `in` o cent√≠metros `cm`)
-   `columns`: cuantas columnas tendr√° el dise√±o (por defecto 1 columna)
-   `mainfont`: fuente principal (busca fuentes instaladas en el sistema pero se puede indicar rutas adicionales con `font-paths`)
-   `fontsize`: tama√±o de fuente base (medida en puntos `pt`)

## typst puro {.title-top}

<br>

Al igual que el **LaTeX** se puede insertar bloques de c√≥digo **typst** sin formato dentro del documento

``` markdown

```{=typst} 
#set par(justify: true)

== T√≠tulo
Este es un ejemplo de texto en typst.


```

Para obtener m√°s informaci√≥n sobre marcado **typst**, consulte el tutorial aqu√≠: <https://typst.app/docs/tutorial/>

## Bloques nativos typst {.title-top}

<br>

Se puede cambiar la apariencia de bloques mediante llamadas nativas de **Typst**, utilizando la clase `.block` en un **Div** con los argumentos apropiados.

``` markdown

::: {.block fill="luma(230)" inset="8pt" radius="4pt"}

Este es un bloque con fondo gris y las aristas redondeadas. 

:::
```

## F√≥rmulas typst {.title-top}

<br>

Typst tiene composici√≥n tipogr√°fica matem√°tica incorporada y utiliza su propia notaci√≥n.

La notaci√≥n va encerrada entre signos \$, de forma similar al LaTeX.

``` markdown
{=typst} 
$ 7.32 beta +
  sum_(i=0)^nabla
    (Q_i (a_i - epsilon)) / 2 $
```

![](images/ecuacion.PNG){.absolute bottom="200" left="20" width="400"}

## Pantillas personalizadas {.title-top}


Existen plantillas typst preconfeccionadas que se pueden utilizar o bien personalizar una propia.

| Formato   | Uso                                                      |
|-----------|----------------------------------------------------------|
| Poster    | quarto use template quarto-ext/typst-templates/poster    |
| IEEE      | quarto use template quarto-ext/typst-templates/ieee      |
| AMS       | quarto use template quarto-ext/typst-templates/ams       |
| Letter    | quarto use template quarto-ext/typst-templates/letter    |
| Fiction   | quarto use template quarto-ext/typst-templates/fiction   |
| Dept News | quarto use template quarto-ext/typst-templates/dept-news |

En el siguiente [tutorial](https://typst.app/docs/tutorial/making-a-template/) de typst guian en la creaci√≥n de una plantilla.

<br>

Tambi√©n en el sitio [Awesome Quarto](https://github.com/qjcg/awesome-typst#templates--libraries) hay p√°ginas de plantillas de terceros disponibles para utilizar.


## Word (docx) {.title-top}

![](images/Word.PNG){.absolute top="0" left="1500" width="250"}

<br>

Las cabecera b√°sica de documentos Word es:

``` rmardown
---
title: "Mi Documento"
format:
  docx:
    toc: true
    toc-depth: 2
    toc-title: Contenidos
---
```

\* en el ejemplo, adem√°s activamos tabla de contenidos, con una profundidad de 2 y t√≠tulo de tabla "Contenidos" (en espa√±ol).

<br>

La mayor√≠a de las opciones de ejecuci√≥n vistas para HTML sirven para este tipo de documentos.


## Plantillas Word {.title-top}

Para personalizar la apariencia de los documentos resultantes en Word se puede a√±adir en la cabecera una plantilla con dise√±o modificado. Para esto se sigue el siguiente paso a paso:

::: {.fragment .fade-in-then-semi-out}

1. Desde Word se crea un nuevo documento y se modifica el estilo del documento (tipo de hoja, orientaci√≥n, m√°rgenes, fuentes, colores, etc)

:::

::: {.fragment .fade-in-then-semi-out}

2. Se almacena el archivo .docx resultante en la carpeta del proyecto RStudio donde estamos construyendo el documento Quarto.

:::

::: {.fragment .fade-in-then-semi-out}

3. En la cabecera YAML del documento Quarto se incluye la l√≠nea `reference-doc:` con el nombre del documento anterior (ejemplo: *plantilla.docx*)
:::

::: {.fragment .fade-in-then-semi-out}

4. Al renderizar Quarto toma las caracter√≠sticas de apariencia definidas y las reproduce en la salida del documento generado.

:::



## Tableros de Quarto¬Æ {.title-top}

<br>

Los dashboards o tableros de Quarto son archivos **HTML** que pueden ser:

- **Est√°ticos** 
Se representan una sola vez y los datos no cambian - pueden incluir elementos din√°micos.

- **Programados** 
Se representan a partir de un cronograma donde los datos se actualizan

- **Parametrizados** 
Se modifican a partir de par√°metros

- **Interactivo** 
Mediante Shiny - requieren de servidor especial


## Cabecera YAML {.title-top}

<br>

El formato de la cabecera YAML de los tableros de Quarto es `dashboard`. 

<br>

````{.yaml}
---
title: "Mi tablero"
format: dashboard
---
````

<br>

La salida generada es HTML y la estructura se asemeja al uso del paquete flexdashboard de RMarkdown.

Se puede definir como ser√° la orientaci√≥n y si se habilita el `scrolling` de la p√°gina.

Otras opciones espec√≠ficas de la cabecera YAML para tableros son los logotipos y los botones de navegaci√≥n.

## Cabecera YAML {.title-top}

Se reconocen alias para botones especiales predeterminados: `linkedin`, `facebook`, `reddit`, `twitter` y `github`. Tambi√©n se pueden crear botones personalizados a partir de [√≠conos bootstrap](https://icons.getbootstrap.com/).

````{.yaml}
    logo: images/INE.gif
    nav-buttons: 
      - linkedin
      - twitter
      - github
      - facebook
      - reddit
      - icon: hospital
        href: https://www.ine.gov.ar
        target: _blank
````

![](images/botones_nav.PNG)

## Componentes {.title-top}

Los tableros constan de varios componentes:

**Barra de navegaci√≥n**: √≠cono, t√≠tulo y autor junto con enlaces a subp√°ginas (si se define m√°s de una p√°gina).

**P√°ginas, filas, columnas y conjuntos de pesta√±as**: las p√°ginas, filas y columnas se definen mediante encabezados de Markdown (con atributos opcionales para controlar la altura, el ancho, etc.). Los conjuntos de pesta√±as se pueden utilizar para dividir a√∫n m√°s el contenido dentro de una fila o columna.

**Tarjetas, barras laterales y barras de herramientas**: las tarjetas son contenedores para gr√°ficos, visualizaci√≥n de datos y contenido de formato libre. El contenido de las tarjetas generalmente se asigna a celdas en el documento fuente. Las barras laterales y las barras de herramientas se utilizan para presentar entradas dentro de tableros interactivos.

## Dise√±o {.title-top}

<br>

Los elementos de dise√±o b√°sico son `paginas`, `filas`, `columnas` y `pesta√±as`.

<br>

Las `paginas` se definen con encabezados tama√±o 1 (#)

<br>

Las filas y columnas se declaran con encabezados tama√±o 2 (##)

<br>

Las pesta√±as utilizan la clase `{.tabset}` en filas tipo ## y cada pesta√±a se declara con un encabezado de tama√±o 3 (###)


## P√°ginas {.title-top}

<br>

````{.yaml}
# Pagina 1 

# Pagina 2 

# Pagina 3 
````

<br>

![](images/Paginas.PNG)

## Filas {.title-top}

<br>

:::: {.columns}

::: {.column width="30%"}

````{.yaml}
## Row {height=30%}

::: {.card title="Fila 30%"}
:::

## Row {height=70%}

::: {.card title="Fila 70%"}
:::
````

:::

::: {.column width="70%"}

![](images/Filas.PNG)

:::

::::


## Columnas {.title-top}

<br>

:::: {.columns}

::: {.column width="30%"}

````{.yaml}
## Column {width=30%}

::: {.card title="Columna 30%"}
:::

## Column {width=70%}

::: {.card title="Columna 70%"}
:::
````

:::

::: {.column width="70%"}

![](images/Columnas.PNG)

:::

::::



## Pesta√±as {.title-top}

<br>

:::: {.columns}

::: {.column width="30%"}

````{.yaml}
## Row {.tabset}

### Pesta√±a 1

::: {.card title=""}
:::

### Pesta√±a 2

::: {.card title=""}
:::
````

:::

::: {.column width="70%"}

![](images/Pesta√±as.PNG)

:::

::::

## Barra lateral {.title-top}

<br>

:::: {.columns}

::: {.column width="30%"}

````{.yaml}
## {.sidebar}

```{{r}}
cat("Barra lateral")

cat("Input 1")

cat("Input 2")

cat("Input 3")
```
````

:::

::: {.column width="70%"}

![](images/Sidebar.PNG)

:::

::::

## Tarjetas {.title-top}

<br>

Las tarjetas que se ubican en las celdas que generan las filas, las columnas y/o las pesta√±as tienen un bot√≥n de expansi√≥n autom√°tico que maximiza la visualizaci√≥n.

![](images/Expand_1.PNG){fig-align="center"}

![](images/Expand_2.PNG){fig-align="center"}

## Tarjetas - contenido {.title-top}

<br>

La sintaxis de una tarjeta inclu√≠da en el dise√±o de p√°gina de un tablero tiene la forma:

````{.yaml}
::: {.card title="T√≠tulo de la tarjeta"}

Aqu√≠ va el texto o elemento markdown / HTML a publicar

:::
````

<br>

El contenido de las tarjetas puede ser cualquiera de los elementos vistos anteriormente en Quarto basados en markdown o c√≥digo HTML puro. Tambi√©n es √∫til incorporar valores din√°micos mediante c√≥digo en l√≠nea. 

## Cajas de valor {.title-top}

<br>

Los cajas de valor son una excelente forma de mostrar valores simples de manera destacada dentro de un tablero.

![](images/valor.PNG){fig-align="center"}

## Cajas de valor {.title-top}

La sintaxis dentro de un fragmento de c√≥digo R tiene la siguiente estructura:

````{.yaml}
```{{r}}
#| content: valuebox 
#| title: "Texto de la caja de valor" 
 
list(
  icon = "nombre-icono",
  color = "color de la caja",
  value = valor a mostrar)
)

```
````

Los √≠conos pueden ser cualquiera de los 2000 disponibles en [√≠conos de bootstrap](https://icons.getbootstrap.com/)

En color puede especificarse alguno de la paleta general hexadecimal o con palabras reservadas tipo `primary`, `success`, `danger`, etc. Estos colores variaran seg√∫n el tema est√©tico aplicado al tablero.

## Cajas de valor {.title-top}

<br>

Tambi√©n se pueden crear cajas de valores usando Markdown simple, en cuyo caso normalmente se incluye el valor mediante una expresi√≥n en l√≠nea. Por ejemplo:

<br>

:::: {.columns}

::: {.column width="70%"}

````{.yaml}
## Row

::: {.valuebox icon="heart-pulse-fill" color="danger"}
Cantidad de enfermos

¬¥{r} enfermos¬¥
:::
````

:::

::: {.column width="30%"}

![](images/enfermos.PNG)

:::

::::


## Tablas desde c√≥digo {.title-top}


Se pueden incluir tablas dentro de estos tableros de dos formas:

- Como una presentaci√≥n tabular simple
- Como un widget interactivo que incluya, por ejemplo ordenamiento y filtrado.

Si lo que se quiere mostrar es una cantidad peque√±a de observaciones se puede utilizar funciones de `knitr` o `flextable` sin problemas.

````{.yaml}
```{{r}}
knitr::kable(datos)

# o con flextable

datos |> 
  flextable()
```
```` 

Estas tablas tendr√°n composici√≥n Markdown simples y llenan autom√°ticamente al  contenedor (desplaz√°ndose horizontal y verticalmente seg√∫n sea necesario).


## Tablas desde c√≥digo {.title-top}

<br>

Si la tabla que queremos mostrar tiene muchos registros o es conveniente que se pueda ordenar de formas ascendente o descendente por alguna/s variable/s o hacer alguna busqueda particular, tenemos que hacer uso de alg√∫n paquete que incluya cierta interactividad.

<br>

Por ejemplo, el paquete DT, esta basado en una interfaz de JavaScript DataTables y agrega filtrado, paginaci√≥n y ordenamiento a sus salidas.

<br>

````{.yaml}
```{{r}}
library(DT)
datatable(datos)
```
```` 

## Tablas desde c√≥digo {.title-top}


```{r}
#| echo: false

library(DT)
library(datos)

encuesta |> 
  select(estado_civil, edad, partido, ingreso) |> 
datatable(class = 'cell-border stripe', 
          rownames = F, 
          options = list(
            pageLength = 3, 
            autoWidth = TRUE))
```


## Gr√°ficos desde c√≥digo {.title-top}

<br>

Los gr√°ficos son los elementos m√°s comunes mostrados en tableros. Al igual que las tablas pueden ser est√°ticos o din√°micos/interactivos.

<br>

- Los est√°ticos ser√°n gr√°ficos generalmente producidos con **ggplot2**
- Los din√°micos estar√°n basados en alguna librer√≠a de JavaScript que incluyen los paquetes especiales `ggiraph`, `Plotly`, `highcharter`, `dygraphs`, etc.
- Tambi√©n hay algunas librer√≠as para mostrar mapas como `Leaflet` o `mapview`

## Gr√°ficos desde c√≥digo {.title-top}

Ejemplo con `ggiraph`

```{r}
#| echo: false
#| message: false
#| warning: false
#| fig-align: center
#| fig-height: 4

library(ggplot2)
library(ggiraph)
data <- mtcars
data$carname <- row.names(data)

gg_point = ggplot(data = data) +
    geom_point_interactive(aes(x = wt, y = qsec, color = disp,
    tooltip = carname, data_id = carname), size = 2) + 
  theme_minimal()

girafe(ggobj = gg_point, options = list(
    opts_toolbar(saveaspng = TRUE)
  ))

```

## htmlwidgets {.title-top}

<br>

Estos componentes din√°micos / interactivos basados en JavaScript mostrados en los paquetes para tablas y gr√°ficos anteriores pertenecen a htmlwidgets.

En el sitio <https://www.htmlwidgets.org/> perteneciente a RStudio / Posit se encuentran publicada la galer√≠a de librer√≠as disponibles.

Cada uno de los 132 paquetes citados tienen su propia p√°gina con la referencia de sus funciones, modo de uso, ejemplos, etc.

Estos componentes se pueden incluir en dashboards con y sin servidor Shiny asociado y tambi√©n en documentos HTML de Quarto.



## {#chau-quarto-title data-menu-title="Hasta la proxima"  background-image="images/Captura8.png" aria-label="Dos pinguinos mirando la luna de Quarto"}